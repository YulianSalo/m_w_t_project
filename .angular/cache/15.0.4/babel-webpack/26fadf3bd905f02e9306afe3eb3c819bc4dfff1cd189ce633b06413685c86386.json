{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../accounts.service\";\nimport * as i3 from \"../cart.service\";\nfunction ShowproddetailsComponent_div_28_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const x_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(x_r5);\n  }\n}\nfunction ShowproddetailsComponent_div_28_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"input\", 23);\n    i0.ɵɵlistener(\"click\", function ShowproddetailsComponent_div_28_div_9_Template_input_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.addtocart());\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ShowproddetailsComponent_div_28_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"input\", 24);\n    i0.ɵɵlistener(\"click\", function ShowproddetailsComponent_div_28_div_10_Template_input_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.updatecart());\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ShowproddetailsComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 11)(2, \"h4\");\n    i0.ɵɵtext(3, \"Quantity :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\")(5, \"select\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function ShowproddetailsComponent_div_28_Template_select_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.qty = $event);\n    });\n    i0.ɵɵelementStart(6, \"option\", 19);\n    i0.ɵɵtext(7, \"Choose\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ShowproddetailsComponent_div_28_option_8_Template, 2, 1, \"option\", 20);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(9, ShowproddetailsComponent_div_28_div_9_Template, 2, 0, \"div\", 21);\n    i0.ɵɵtemplate(10, ShowproddetailsComponent_div_28_div_10_Template, 2, 0, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.qty);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.stockloop);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.uflag);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.uflag);\n  }\n}\nfunction ShowproddetailsComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"h4\");\n    i0.ɵɵtext(2, \"Out of Stock\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let ShowproddetailsComponent = /*#__PURE__*/(() => {\n  class ShowproddetailsComponent {\n    constructor(myroute, catsrvobj, cartsrvobj, myrouter) {\n      this.myroute = myroute;\n      this.catsrvobj = catsrvobj;\n      this.cartsrvobj = cartsrvobj;\n      this.myrouter = myrouter;\n      this.stockloop = [];\n      this.qty = \"\";\n      this.uflag = false;\n      this.myroute.queryParams.subscribe({\n        next: resp => {\n          this.prodid = resp[\"pid\"];\n          this.fetchproddetails();\n        },\n        error: err => {}\n      });\n    }\n    ngOnInit() {\n      this.showcartprod();\n    }\n    fetchproddetails() {\n      this.catsrvobj.fetchproddetailsbyid(this.prodid).subscribe({\n        next: resp => {\n          this.pdetails = resp;\n          this.rt = this.pdetails[0][\"rate\"];\n          this.dis = this.pdetails[0][\"discount\"];\n          this.disamt = this.dis * this.rt / 100;\n          this.remamt = this.rt - this.disamt;\n          this.stock = this.pdetails[0][\"stock\"];\n          this.pname = this.pdetails[0][\"product\"];\n          this.ppic = this.pdetails[0][\"prodpic\"];\n          this.desc = this.pdetails[0][\"description\"];\n          if (this.stock <= 0) {\n            this.flag = false;\n          } else {\n            this.flag = true;\n          }\n          if (this.stock > 10) {\n            for (var x = 1; x <= 10; x++) {\n              this.stockloop.push(x);\n            }\n          } else {\n            for (var x = 1; x <= this.stock; x++) {\n              this.stockloop.push(x);\n            }\n          }\n        },\n        error: err => {}\n      });\n    }\n    showcartprod() {\n      this.cartsrvobj.fetchcart(sessionStorage.getItem(\"username\")).subscribe({\n        next: res => {\n          this.cartprodlist = [];\n          this.cartprodlist = res;\n          for (var i = 0; i < this.cartprodlist.length; i++) {\n            if (this.prodid == this.cartprodlist[i].prodid) {\n              this.uflag = true;\n              this.qty = this.cartprodlist[i].qty;\n              this.cartobjid = this.cartprodlist[i].prodid;\n              break;\n            } else {\n              this.uflag = false;\n            }\n          }\n        },\n        error: err => {}\n      });\n    }\n    addtocart() {\n      if (sessionStorage.getItem(\"username\") != null) {\n        var tcost = Number(this.qty) * this.remamt;\n        var mydata = {\n          prodid: this.prodid,\n          prodname: this.pname,\n          rate: this.remamt,\n          qty: this.qty,\n          totalcost: tcost,\n          picture: this.ppic,\n          username: sessionStorage.getItem(\"username\")\n        };\n        this.cartsrvobj.savetocart(mydata).subscribe({\n          next: resp => {\n            if (resp == \"success\") {\n              this.myrouter.navigateByUrl(\"/showcart\");\n            } else {\n              this.msg = \"Problem while adding to cart\";\n            }\n          },\n          error: err => {\n            alert(\"there is some error\");\n            alert(err);\n            this.msg = err;\n          }\n        });\n      } else {\n        this.myrouter.navigateByUrl(\"/login?pid=\" + this.prodid);\n      }\n    }\n    updatecart() {\n      if (sessionStorage.getItem(\"username\") != null) {\n        var tcost = Number(this.qty) * this.remamt;\n        var mydata = {\n          id: this.cartobjid,\n          qty: this.qty,\n          totalcost: tcost\n        };\n        this.cartsrvobj.updatecart(mydata).subscribe({\n          next: resp => {\n            if (resp[\"nModified\"] == 1) {\n              this.myrouter.navigateByUrl(\"/showcart\");\n            } else {\n              this.msg = \"Problem while adding to cart\";\n            }\n          },\n          error: err => {\n            alert(\"there is some error\");\n            alert(err);\n            this.msg = err;\n          }\n        });\n      } else {\n        this.myrouter.navigateByUrl(\"/login?pid=\" + this.prodid);\n      }\n    }\n  }\n  ShowproddetailsComponent.ɵfac = function ShowproddetailsComponent_Factory(t) {\n    return new (t || ShowproddetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.AccountsService), i0.ɵɵdirectiveInject(i3.CartService), i0.ɵɵdirectiveInject(i1.Router));\n  };\n  ShowproddetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShowproddetailsComponent,\n    selectors: [[\"app-showproddetails\"]],\n    decls: 31,\n    vars: 7,\n    consts: [[1, \"breadcrumbs\"], [1, \"container\"], [\"data-wow-delay\", \".5s\", 1, \"breadcrumb\", \"breadcrumb1\", \"animated\", \"wow\", \"slideInLeft\"], [\"href\", \"index.html\"], [\"aria-hidden\", \"true\", 1, \"glyphicon\", \"glyphicon-home\"], [1, \"active\"], [1, \"products\"], [1, \"agileinfo_single\"], [1, \"col-md-4\", \"agileinfo_single_left\"], [\"id\", \"example\", \"alt\", \" \", 1, \"img-responsive\", 3, \"src\"], [1, \"col-md-8\", \"agileinfo_single_right\"], [1, \"w3agile_description\"], [1, \"snipcart-item\", \"block\"], [1, \"snipcart-thumb\", \"agileinfo_single_right_snipcart\"], [1, \"m-sing\"], [4, \"ngIf\"], [\"class\", \"w3agile_description\", 4, \"ngIf\"], [1, \"clearfix\"], [\"name\", \"qty\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"snipcart-details agileinfo_single_right_details\", 4, \"ngIf\"], [1, \"snipcart-details\", \"agileinfo_single_right_details\"], [\"type\", \"submit\", \"name\", \"submit\", \"value\", \"Add to cart\", 1, \"button\", 3, \"click\"], [\"type\", \"submit\", \"name\", \"submit\", \"value\", \"update Cart\", 1, \"button\", 3, \"click\"]],\n    template: function ShowproddetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"ol\", 2)(3, \"li\")(4, \"a\", 3);\n        i0.ɵɵelement(5, \"span\", 4);\n        i0.ɵɵtext(6, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"li\", 5);\n        i0.ɵɵtext(8, \"Product Details\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 1)(11, \"div\", 7)(12, \"div\", 8);\n        i0.ɵɵelement(13, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 10)(15, \"h2\");\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 11)(18, \"h4\");\n        i0.ɵɵtext(19, \"Description :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"p\");\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 12)(23, \"div\", 13)(24, \"h4\", 14);\n        i0.ɵɵtext(25);\n        i0.ɵɵelementStart(26, \"span\");\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(28, ShowproddetailsComponent_div_28_Template, 11, 4, \"div\", 15);\n        i0.ɵɵtemplate(29, ShowproddetailsComponent_div_29_Template, 3, 0, \"div\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(30, \"div\", 17);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵpropertyInterpolate1(\"src\", \"uploads/\", ctx.ppic, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.pname);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.desc);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"Rs.\", ctx.remamt, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Rs.\", ctx.rt, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.flag);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.flag);\n      }\n    }\n  });\n  return ShowproddetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}