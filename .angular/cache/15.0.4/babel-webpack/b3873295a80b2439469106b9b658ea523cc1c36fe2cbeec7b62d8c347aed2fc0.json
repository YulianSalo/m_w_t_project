{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../accounts.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UpdateproductComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const x_r2 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", x_r2._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(x_r2.categoryname);\n  }\n}\nfunction UpdateproductComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const x_r3 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", x_r3._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(x_r3.subcatname);\n  }\n}\nexport let UpdateproductComponent = /*#__PURE__*/(() => {\n  class UpdateproductComponent {\n    constructor(catsrvobj, myroute) {\n      this.catsrvobj = catsrvobj;\n      this.myroute = myroute;\n      this.category = \"\";\n      this.subcat = \"\";\n      this.matchedsubcatlist = [];\n      this.flag = false;\n      this.myroute.queryParams.subscribe({\n        next: params => {\n          this.prodid = params[\"prodid\"];\n          this.fetchproddetails();\n        }\n      });\n    }\n    ngOnInit() {\n      this.fetchcat();\n      // this.fetchallsubcat();\n    }\n\n    fileselected(event) {\n      this.myfile = event.target.files[0];\n      console.log(event);\n    }\n    fetchcat() {\n      this.catsrvobj.fetchallcat().subscribe({\n        next: res => {\n          this.allcatlist = res;\n        },\n        error: err => {\n          this.msg = err;\n        }\n      });\n    }\n    // fetchallsubcat()\n    // {\n    //   this.catsrvobj.fetchallsubcat().subscribe({\n    //     next:(res:any[])=>{\n    //       this.allscatlist= res;\n    //     },\n    //     error:(err)=>{\n    //       this.msg=err;\n    //     }\n    //   })\n    // }\n    fetchsubcatbycatid() {\n      this.allscatlist = [];\n      this.subcat = \"\";\n      this.catsrvobj.fetchsubcatbycatid(this.category).subscribe({\n        next: res => {\n          this.allscatlist = res;\n        },\n        error: err => {\n          this.msg = err;\n        }\n      });\n    }\n    fetchproddetails() {\n      this.catsrvobj.fetchproddetailsbyid(this.prodid).subscribe({\n        next: resp => {\n          this.category = resp[0].category;\n          this.fetchsubcatbycatid();\n          this.prodname = resp[0].product;\n          this.subcat = resp[0].subcatname;\n          this.rate = resp[0].rate;\n          this.disc = resp[0].discount;\n          this.stock = resp[0].stock;\n          this.description = resp[0].description;\n          this.prodimg = resp[0].prodpic;\n        },\n        error: err => {\n          this.msg = err;\n        }\n      });\n    }\n    updateprod() {\n      var mydata = new FormData();\n      if (this.myfile != null)\n        // user has chosen new file\n        {\n          mydata.append(\"category\", this.category);\n          mydata.append(\"subcatname\", this.subcat);\n          mydata.append(\"product\", this.prodname);\n          mydata.append(\"newprodpic\", this.myfile); //new pic\n          mydata.append(\"oldpicname\", this.prodimg); //sent for deletion\n          mydata.append(\"rate\", this.rate);\n          mydata.append(\"discount\", this.disc);\n          mydata.append(\"stock\", this.stock);\n          mydata.append(\"description\", this.description);\n          mydata.append(\"prodid\", this.prodid);\n        } else {\n        mydata.append(\"category\", this.category);\n        mydata.append(\"subcatname\", this.subcat);\n        mydata.append(\"product\", this.prodname);\n        mydata.append(\"oldpicname\", this.prodimg); //sent for retention\n        mydata.append(\"rate\", this.rate);\n        mydata.append(\"discount\", this.disc);\n        mydata.append(\"stock\", this.stock);\n        mydata.append(\"description\", this.description);\n        mydata.append(\"prodid\", this.prodid);\n      }\n      this.catsrvobj.updateproduct(mydata).subscribe({\n        next: res => {\n          if (res['nModified'] == 1) {\n            this.msg = \"Product Updated Successfully\";\n          } else {\n            this.msg = \"Product Not Updated Successfully\";\n          }\n        },\n        error: err => {}\n      });\n    }\n  }\n  UpdateproductComponent.ɵfac = function UpdateproductComponent_Factory(t) {\n    return new (t || UpdateproductComponent)(i0.ɵɵdirectiveInject(i1.AccountsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  UpdateproductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UpdateproductComponent,\n    selectors: [[\"app-updateproduct\"]],\n    decls: 37,\n    vars: 11,\n    consts: [[1, \"login\"], [1, \"container\"], [\"data-wow-delay\", \".5s\", 1, \"login-form-grids\", \"animated\", \"wow\", \"slideInUp\"], [\"enctype\", \"multipart/form-data\"], [\"name\", \"category\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"subcat\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"prodname\", \"placeholder\", \"Product Name\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"rate\", \"placeholder\", \"Rate\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"disc\", \"placeholder\", \"Discount in % (But dont add % symbol)\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"stock\", \"placeholder\", \"Stock\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"description\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"height\", \"75\", 3, \"src\"], [\"type\", \"file\", \"name\", \"scatpic\", 3, \"change\"], [\"type\", \"submit\", \"name\", \"b2\", \"value\", \"Update\", 3, \"click\"], [3, \"value\"]],\n    template: function UpdateproductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ɵɵtext(3, \"Update Product\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"form\", 3)(6, \"select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_select_ngModelChange_6_listener($event) {\n          return ctx.category = $event;\n        })(\"change\", function UpdateproductComponent_Template_select_change_6_listener() {\n          return ctx.fetchsubcatbycatid();\n        });\n        i0.ɵɵelementStart(7, \"option\", 5);\n        i0.ɵɵtext(8, \"Choose Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, UpdateproductComponent_option_9_Template, 2, 2, \"option\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵelementStart(11, \"select\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_select_ngModelChange_11_listener($event) {\n          return ctx.subcat = $event;\n        });\n        i0.ɵɵelementStart(12, \"option\", 5);\n        i0.ɵɵtext(13, \"Choose SubCategory\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, UpdateproductComponent_option_14_Template, 2, 2, \"option\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelementStart(16, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.prodname = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵelementStart(18, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.rate = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementStart(20, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_input_ngModelChange_20_listener($event) {\n          return ctx.disc = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.stock = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"br\");\n        i0.ɵɵelementStart(24, \"textarea\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function UpdateproductComponent_Template_textarea_ngModelChange_24_listener($event) {\n          return ctx.description = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"br\")(26, \"img\", 13)(27, \"br\")(28, \"br\");\n        i0.ɵɵtext(29, \" Choose new image, if required\");\n        i0.ɵɵelement(30, \"br\")(31, \"br\");\n        i0.ɵɵelementStart(32, \"input\", 14);\n        i0.ɵɵlistener(\"change\", function UpdateproductComponent_Template_input_change_32_listener($event) {\n          return ctx.fileselected($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"input\", 15);\n        i0.ɵɵlistener(\"click\", function UpdateproductComponent_Template_input_click_33_listener() {\n          return ctx.updateprod();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(34, \"br\");\n        i0.ɵɵelementStart(35, \"p\");\n        i0.ɵɵtext(36);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.category);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.allcatlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.subcat);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.allscatlist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.prodname);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.rate);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.disc);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.stock);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.description);\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate1(\"src\", \"uploads/\", ctx.prodimg, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate(ctx.msg);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm]\n  });\n  return UpdateproductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}