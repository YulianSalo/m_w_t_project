{"ast":null,"code":"import { Conn } from '../conn';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../accounts.service\";\nfunction ListofmembersComponent_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ListofmembersComponent_tr_20_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const x_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.ondelete(x_r1._id));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const x_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r2 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(x_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(x_r1.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(x_r1.phone);\n  }\n}\nexport let ListofmembersComponent = /*#__PURE__*/(() => {\n  class ListofmembersComponent {\n    //step1: init http obj\n    constructor(myhttp, memlistservice) {\n      this.myhttp = myhttp;\n      this.memlistservice = memlistservice;\n    }\n    //LISTOFMEMBERS WITH SERVICE AND CLASSES\n    ngOnInit() {\n      this.memlistservice.memlist().subscribe({\n        next: res => {\n          this.memblist = res;\n        },\n        error: err => {\n          this.msg = err;\n        }\n      });\n    }\n    // //LISTOFMEMBERS WITH SERVICE \n    // ngOnInit(): void {\n    //   this.memlistservice.memlist().subscribe({\n    //     next:(res)=>{\n    //       this.memblist= res;\n    //     },\n    //     error:(err)=>{\n    //       this.msg=err;\n    //     }\n    //   })\n    // }\n    ondelete(memid) {\n      // alert(memid)\n      var confrm = confirm(\"Are you sure want to delete?\");\n      if (confrm) {\n        //note that we get a json object only as a response and not an array of objects\n        this.myhttp.delete(Conn.nodeurl + \"/deluser?uid=\" + memid, {\n          responseType: \"json\"\n        }).subscribe({\n          next: res => {\n            if (res[\"deletedCount\"] == 1) {\n              alert(\"User Deleted Successfully!\");\n              this.ngOnInit();\n              //this was the best part of todays lecture used to refresh the componenet\n            }\n          },\n\n          error: err => {\n            this.msg = err;\n          }\n        });\n      }\n    }\n  }\n  ListofmembersComponent.ɵfac = function ListofmembersComponent_Factory(t) {\n    return new (t || ListofmembersComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AccountsService));\n  };\n  ListofmembersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListofmembersComponent,\n    selectors: [[\"app-listofmembers\"]],\n    decls: 22,\n    vars: 2,\n    consts: [[1, \"checkout\"], [1, \"container\"], [1, \"w3_agile_header\"], [1, \"table\"], [1, \"timetable_sub\", \"space\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function ListofmembersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n        i0.ɵɵtext(3, \"List of Members: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"br\")(5, \"br\");\n        i0.ɵɵelementStart(6, \"div\", 3)(7, \"table\", 4)(8, \"thead\")(9, \"tr\")(10, \"th\");\n        i0.ɵɵtext(11, \"SL No.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\");\n        i0.ɵɵtext(13, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Phone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"Delete\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(20, ListofmembersComponent_tr_20_Template, 12, 4, \"tr\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngForOf\", ctx.memblist);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.msg, \" \");\n      }\n    },\n    styles: [\".table[_ngcontent-%COMP%]{overflow:scroll}\"]\n  });\n  return ListofmembersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}